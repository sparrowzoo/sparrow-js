(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3317],{42108:function(e,t,n){Promise.resolve().then(n.bind(n,94962)),Promise.resolve().then(n.bind(n,65269)),Promise.resolve().then(n.bind(n,72159))},87138:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var o=n(231),r=n.n(o)},65269:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var o=n(57437),r=n(87138),s=n(49753);function i(e){let{children:t}=e;return(0,o.jsxs)("div",{className:"flex flex-row flex-1 w-full",children:[(0,o.jsxs)("div",{className:"w-[20rem] flex flex-col  gap-4 p-4 border-r border-indigo-500",children:[(0,o.jsx)("div",{className:"bg-cyan-500 text-white p-2 rounded-xl cursor-pointer",children:(0,o.jsx)(r.default,{href:"".concat(s.Y4,"/chat/friends"),children:"通讯录管理"})}),(0,o.jsx)("div",{className:"bg-cyan-500 text-white p-2 rounded-xl cursor-pointer",children:(0,o.jsx)(r.default,{href:"".concat(s.Y4,"/chat/sessions/session"),children:"我的会话"})})]}),(0,o.jsxs)("div",{className:"flex-1 border-l border-indigo-500",children:[" ",t]})]})}},72159:function(e,t,n){"use strict";n.d(t,{default:function(){return c}});var o=n(57437),r=n(2265),s=n(88161),i=n(83480);function c(){let[e,t]=(0,r.useState)("");return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:"登录"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{className:"text-red-700",onChange:e=>t(e.target.value),type:"text",placeholder:"用户名"}),(0,o.jsx)("button",{onClick:()=>{console.log(e),console.log("login",e),s.H.post("/chat/v2/login.json",JSON.stringify({id:e,category:1}),!1).then(e=>{(0,i.o4)(e.data),console.log(JSON.stringify(e))})},children:"登录"}),(0,o.jsx)("button",{onClick:()=>{console.log(e),console.log("login",e),s.H.post("/chat/v2/long-login.json",e,!1).then(e=>{(0,i.o4)(e.data),console.log(JSON.stringify(e))})},children:"Long UserId登录"})]})]})}},49753:function(e,t,n){"use strict";n.d(t,{B1:function(){return i},Ee:function(){return o},Y4:function(){return a},Yo:function(){return l},_k:function(){return c},lg:function(){return r},oT:function(){return s}});let o="user_info",r="http://www.sparrowzoo.com",s="SESSION",i="sparrow-token",c="SESSION",a="http://www.sparrowzoo.com/react",l="ws://www.sparrowzoo.com/websocket"},88161:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var o=n(83480),r=n(49753),s=n(94962);class i{static async get(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e=r.lg+e;let n=null;return t&&(n=await (0,o.LP)(!1).then(e=>e)),new Promise((t,o)=>{fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:n}}).then(async e=>{let n=await e.json();"0"!=n.code?(s.ZP.error(null==n?void 0:n.message),o(n)):t(n)}).catch(e=>{s.ZP.error(e.message),o(e)})})}static async post(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];e=r.lg+e;let i=null;return n&&(i=await (0,o.LP)(!1).then(e=>e)),new Promise((n,o)=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:i},body:t}).then(async e=>{let t=await e.json();"0"!=t.code?(s.ZP.error(null==t?void 0:t.message),o(t)):n(t)}).catch(e=>{s.ZP.error(e.message),o(e)})})}}},83480:function(e,t,n){"use strict";n.d(t,{LP:function(){return c},gy:function(){return i},o4:function(){return a}});var o=n(49753),r=n(94962),s=n(88161);function i(){sessionStorage.removeItem(o.B1),localStorage.removeItem(o.B1),sessionStorage.removeItem(o.Ee)}async function c(e){null==e&&(e=!1);let t=sessionStorage.getItem(o.B1);return t||(t=localStorage.getItem(o.B1))?t:e?(await s.H.get("/chat/v2/get-visitor-token.json",!1).then(async e=>{"0"==e.code?(t=e.data,sessionStorage.setItem(o.B1,e.data)):r.ZP.error(e.message)}).catch(e=>{r.ZP.error(e.message),console.error(e)}),t):""}function a(e){if(o.oT==o._k){sessionStorage.setItem(o.B1,e);return}localStorage.setItem(o.B1,e)}}},function(e){e.O(0,[231,4962,2971,7023,1744],function(){return e(e.s=42108)}),_N_E=e.O()}]);