(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1471],{10687:function(t,e,n){Promise.resolve().then(n.bind(n,72159))},95189:function(t,e,n){"use strict";n.d(e,{B1:function(){return i},Ee:function(){return o},Y4:function(){return l},Yo:function(){return a},_k:function(){return c},lg:function(){return r},oT:function(){return s}});let o="user_info",r="http://www.sparrowzoo.com",s="SESSION",i="sparrow-token",c="SESSION",l="http://www.sparrowzoo.com/react",a="ws://www.sparrowzoo.com/websocket"},28773:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var o=n(31349),r=n(95189),s=n(94962);class i{static async get(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=r.lg+t;let i=null;e&&(i=await (0,o.LP)().then(t=>t));let c={method:"GET",headers:{"Content-Type":"application/json",Authorization:i}};return n&&(c.credentials="include"),new Promise((e,n)=>{fetch(t,c).then(async t=>{let o=await t.json();"0"!=o.code?(s.ZP.error(null==o?void 0:o.message),n(o)):e(o)}).catch(t=>{s.ZP.error(t.message),n(t)})})}static async post(t,e){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=r.lg+t;let c=null;n&&(c=await (0,o.LP)().then(t=>t));let l={method:"POST",headers:{"Content-Type":"application/json",Authorization:c},body:e};return i&&(l.credentials="include"),new Promise((e,n)=>{fetch(t,l).then(async t=>{let o=await t.json();"0"!=o.code?(s.ZP.error(null==o?void 0:o.message),n(o)):e(o)}).catch(t=>{s.ZP.error(t.message),n(t)})})}}},31349:function(t,e,n){"use strict";n.d(e,{LP:function(){return s},gy:function(){return r},o4:function(){return i}});var o=n(95189);function r(){sessionStorage.removeItem(o.B1),localStorage.removeItem(o.B1),sessionStorage.removeItem(o.Ee)}async function s(t){let e=sessionStorage.getItem(o.B1);return e||(e=localStorage.getItem(o.B1))?e:t?e=await t():""}function i(t){if(o.oT==o._k){sessionStorage.setItem(o.B1,t);return}localStorage.setItem(o.B1,t)}},72159:function(t,e,n){"use strict";n.d(e,{default:function(){return c}});var o=n(57437),r=n(2265),s=n(28773),i=n(31349);function c(){let[t,e]=(0,r.useState)("");return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:"登录"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{className:"text-red-700",onChange:t=>e(t.target.value),type:"text",placeholder:"用户名"}),(0,o.jsx)("button",{onClick:()=>{console.log(t),console.log("login",t),s.Z.post("/chat/v2/login.json",JSON.stringify({id:t,category:1}),!1).then(t=>{(0,i.o4)(t.data),console.log(JSON.stringify(t))})},children:"登录"}),(0,o.jsx)("button",{onClick:()=>{console.log(t),console.log("login",t),s.Z.post("/chat/v2/long-login.json",t,!1).then(t=>{(0,i.o4)(t.data),console.log(JSON.stringify(t))})},children:"Long UserId登录"})]})]})}}},function(t){t.O(0,[4962,2971,7023,1744],function(){return t(t.s=10687)}),_N_E=t.O()}]);