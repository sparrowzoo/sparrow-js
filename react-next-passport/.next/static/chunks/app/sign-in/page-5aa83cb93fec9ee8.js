(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{6947:function(e,s,r){Promise.resolve().then(r.bind(r,1110))},1110:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return C}});var a=r(7437),t=r(6648),l=r(7138),n=r(9733),i=r(7209),c=r(402),d=r(9343),o=r(8047);let m=o.Ryn({userName:o.zGw(o.Z_8("请输入用户名或邮箱"),o.v2J("请输入用户名或邮箱")),password:o.zGw(o.Z_8(),o.v2J("请输入密码."),o.EiV(8,"密码至少8个字符"),o.SzQ(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/,"密码格式 至少8个字符，至少1个字母，1个数字和1个特殊字符")),captcha:o.zGw(o.Z_8(),o.v2J("请输入验证码."),o.EiV(4,"验证码至少4个字符")),rememberMe:o.zGw(o.YjB(),o.vs(e=>!0===e))});var x=r(3927),h=r(2265),u=r(8773),p=r(9479),f=r(8726),j=r(4477),N=r(4346),g=r(1706),w=r(5409),b=r(4867),v=r(9354);let y=h.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(w.fC,{ref:s,className:(0,v.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...t,children:(0,a.jsx)(w.z$,{className:(0,v.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(b.nQG,{className:"h-4 w-4"})})})});y.displayName=w.fC.displayName;var k=r(9402),_=r(5753);function C(){let[e,s]=h.useState(!1),r=(0,k.Z)(),o=(0,_.Z)(),w=decodeURIComponent(window.location.search.substring(1)),{register:b,setValue:v,handleSubmit:C,formState:{errors:Z}}=(0,d.cI)({mode:"onChange",resolver:(0,x.Y)(m,{abortEarly:!1})});return(0,a.jsxs)("div",{className:"w-full text-left",children:[(0,a.jsx)(f.x7,{position:"top-center",reverseOrder:!1}),(0,a.jsxs)("div",{className:"w-full lg:grid lg:min-h-[600px] lg:grid-cols-2 xl:min-h-[800px]",children:[(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"mx-auto grid w-[350px] gap-6",children:[(0,a.jsxs)("div",{className:"grid gap-2 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Login"}),(0,a.jsx)("p",{className:"text-balance text-muted-foreground",children:"输入用户名/邮箱和密码"})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(c._,{htmlFor:"userName",children:"用户名或邮箱"}),(0,a.jsx)(i.I,{...b("userName"),id:"userName",type:"text",placeholder:"请输入用户名或邮箱"}),(0,a.jsx)(g.B,{errors:Z,name:"userName",render:e=>{let{message:s}=e;return(0,a.jsx)("p",{className:"text-red-700 text-sm",children:s})}})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c._,{htmlFor:"password",children:"Password"}),(0,a.jsx)(l.default,{href:"/forgot-password",className:"ml-auto inline-block text-sm underline",children:"忘记密码?"})]}),(0,a.jsx)(i.I,{...b("password"),id:"password",type:"password"}),(0,a.jsx)(g.B,{errors:Z,name:"password",render:e=>{let{message:s}=e;return(0,a.jsx)("p",{className:"text-red-700 text-sm",children:s})}})]}),(0,a.jsxs)("div",{className:"flex-col items-left ",children:[(0,a.jsx)(c._,{className:"w-32",htmlFor:"captcha",children:"验证码"}),(0,a.jsxs)("div",{className:"flex flex-row items-left cursor-pointer",children:[(0,a.jsx)(i.I,{...b("captcha"),className:"w-32",id:"captcha",type:"text"}),(0,a.jsx)("img",{ref:r,src:N.Z,alt:"captcha",className:"w-16 h-8 cursor-pointer"})]}),(0,a.jsx)(g.B,{errors:Z,name:"captcha",render:e=>{let{message:s}=e;return(0,a.jsx)("p",{className:"text-red-700 text-sm",children:s})}})]}),(0,a.jsxs)("div",{className:"flex flex-row-reverse gap-2",children:[(0,a.jsx)(y,{defaultChecked:!1,onCheckedChange:function(e){v("rememberMe",e)},id:"rememberMe"}),(0,a.jsx)("label",{htmlFor:"rememberMe",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remember me"}),(0,a.jsx)(g.B,{errors:Z,name:"rememberMe",render:e=>{let{message:s}=e;return(0,a.jsx)("p",{className:"text-red-700 text-sm",children:s})}})]}),(0,a.jsxs)(n.z,{onClick:C((e,r)=>{s(!0),u.Z.post("/shortcut-login.json",JSON.stringify(e),p.Z.getCurrentStorage(),!0).then(e=>{null==o||o.setToken(e.data.token),s(!1),f.ZP.success("恭喜！登录成功，欢迎回来！志哥欢迎您！！！"),setTimeout(()=>{!function(e){if(e){window.location.href=e;return}window.location.href="/"}(w)},2e3)}).catch(e=>{s(!1)})}),className:"cursor-pointer",type:"submit",disabled:e,children:[e&&(0,a.jsx)(j.P.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),"登录"]}),(0,a.jsx)(n.z,{variant:"outline",className:"w-full",children:"Login with wechat"})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-sm",children:["还没有帐号?"," ",(0,a.jsx)(l.default,{href:"/sign-up",className:"underline",children:"注册"})]})]})}),(0,a.jsx)("div",{className:"hidden min-h-screen bg-muted lg:block",children:(0,a.jsx)(t.default,{src:"/brand/sparrow2.jpg",alt:"Image",width:"1920",height:"1080",className:"h-full w-full object-cover dark:brightness-[0.8] dark:grayscale"})})]})]})}}},function(e){e.O(0,[310,935,900,464,971,23,744],function(){return e(e.s=6947)}),_N_E=e.O()}]);